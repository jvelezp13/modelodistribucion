# Generated by Django 4.2.26 on 2025-11-27 16:20

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('core', '0030_remove_volumenoperacion'),
    ]

    operations = [
        migrations.CreateModel(
            name='CanalVenta',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=100, unique=True, verbose_name='Nombre del Canal')),
                ('descripcion', models.TextField(blank=True, verbose_name='Descripción')),
                ('activo', models.BooleanField(default=True, verbose_name='Activo')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_modificacion', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Canal de Venta',
                'verbose_name_plural': 'Canales de Venta',
                'db_table': 'dxv_canal_venta',
                'ordering': ['nombre'],
            },
        ),
        migrations.CreateModel(
            name='CategoriaProducto',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=100, verbose_name='Nombre de Categoría')),
                ('descripcion', models.TextField(blank=True, verbose_name='Descripción')),
                ('precio_promedio', models.DecimalField(decimal_places=2, help_text='Precio promedio por unidad en esta categoría', max_digits=12, verbose_name='Precio Promedio')),
                ('activo', models.BooleanField(default=True, verbose_name='Activo')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_modificacion', models.DateTimeField(auto_now=True)),
                ('marca', models.ForeignKey(blank=True, help_text='Dejar vacío para categoría compartida entre marcas', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='categorias_producto', to='core.marca', verbose_name='Marca')),
            ],
            options={
                'verbose_name': 'Categoría de Producto',
                'verbose_name_plural': 'Categorías de Producto',
                'db_table': 'dxv_categoria_producto',
                'ordering': ['marca', 'nombre'],
            },
        ),
        migrations.CreateModel(
            name='DefinicionMercado',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=100, verbose_name='Nombre del Mercado')),
                ('tipo', models.CharField(choices=[('geografico', 'Geográfico (región/ciudad)'), ('segmento', 'Segmento de Mercado'), ('clientes', 'Base de Clientes'), ('categoria', 'Categoría de Producto')], max_length=20, verbose_name='Tipo de Mercado')),
                ('descripcion', models.TextField(blank=True, verbose_name='Descripción')),
                ('tamano_mercado', models.DecimalField(decimal_places=2, help_text='Valor total del mercado en pesos', max_digits=15, verbose_name='Tamaño del Mercado ($)')),
                ('crecimiento_anual', models.DecimalField(decimal_places=2, default=0, help_text='Tasa de crecimiento esperada del mercado', max_digits=5, verbose_name='Crecimiento Anual %')),
                ('ticket_promedio', models.DecimalField(blank=True, decimal_places=2, help_text="Para tipo 'clientes': valor promedio por cliente", max_digits=12, null=True, verbose_name='Ticket Promedio')),
                ('numero_clientes_potenciales', models.IntegerField(blank=True, help_text="Para tipo 'clientes': número total de clientes en el mercado", null=True, verbose_name='Clientes Potenciales')),
                ('activo', models.BooleanField(default=True, verbose_name='Activo')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_modificacion', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Definición de Mercado',
                'verbose_name_plural': 'Definiciones de Mercado',
                'db_table': 'dxv_definicion_mercado',
                'ordering': ['tipo', 'nombre'],
            },
        ),
        migrations.CreateModel(
            name='PlantillaEstacional',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=100, verbose_name='Nombre de Plantilla')),
                ('descripcion', models.TextField(blank=True, verbose_name='Descripción')),
                ('enero', models.DecimalField(decimal_places=2, default=8.33, max_digits=5, verbose_name='Enero %')),
                ('febrero', models.DecimalField(decimal_places=2, default=8.33, max_digits=5, verbose_name='Febrero %')),
                ('marzo', models.DecimalField(decimal_places=2, default=8.33, max_digits=5, verbose_name='Marzo %')),
                ('abril', models.DecimalField(decimal_places=2, default=8.33, max_digits=5, verbose_name='Abril %')),
                ('mayo', models.DecimalField(decimal_places=2, default=8.33, max_digits=5, verbose_name='Mayo %')),
                ('junio', models.DecimalField(decimal_places=2, default=8.33, max_digits=5, verbose_name='Junio %')),
                ('julio', models.DecimalField(decimal_places=2, default=8.33, max_digits=5, verbose_name='Julio %')),
                ('agosto', models.DecimalField(decimal_places=2, default=8.33, max_digits=5, verbose_name='Agosto %')),
                ('septiembre', models.DecimalField(decimal_places=2, default=8.33, max_digits=5, verbose_name='Septiembre %')),
                ('octubre', models.DecimalField(decimal_places=2, default=8.33, max_digits=5, verbose_name='Octubre %')),
                ('noviembre', models.DecimalField(decimal_places=2, default=8.33, max_digits=5, verbose_name='Noviembre %')),
                ('diciembre', models.DecimalField(decimal_places=2, default=8.37, max_digits=5, verbose_name='Diciembre %')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_modificacion', models.DateTimeField(auto_now=True)),
                ('marca', models.ForeignKey(blank=True, help_text='Dejar vacío para plantilla global', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='plantillas_estacionales', to='core.marca', verbose_name='Marca')),
            ],
            options={
                'verbose_name': 'Plantilla Estacional',
                'verbose_name_plural': 'Plantillas Estacionales',
                'db_table': 'dxv_plantilla_estacional',
                'ordering': ['marca', 'nombre'],
            },
        ),
        migrations.CreateModel(
            name='Producto',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('sku', models.CharField(max_length=50, verbose_name='SKU')),
                ('nombre', models.CharField(max_length=200, verbose_name='Nombre del Producto')),
                ('precio_unitario', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Precio Unitario')),
                ('activo', models.BooleanField(default=True, verbose_name='Activo')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_modificacion', models.DateTimeField(auto_now=True)),
                ('categoria', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='productos', to='core.categoriaproducto', verbose_name='Categoría')),
                ('marca', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='productos', to='core.marca', verbose_name='Marca')),
            ],
            options={
                'verbose_name': 'Producto',
                'verbose_name_plural': 'Productos',
                'db_table': 'dxv_producto',
                'ordering': ['marca', 'categoria', 'nombre'],
                'unique_together': {('marca', 'sku')},
            },
        ),
        migrations.CreateModel(
            name='ProyeccionVentasConfig',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('anio', models.IntegerField(verbose_name='Año de Proyección')),
                ('metodo', models.CharField(choices=[('manual', 'Entrada Manual Directa'), ('crecimiento', 'Crecimiento sobre Base'), ('precio_unidades', 'Precio × Unidades'), ('canal', 'Por Canal de Venta'), ('penetracion', 'Penetración de Mercado')], max_length=20, verbose_name='Método de Proyección')),
                ('notas', models.TextField(blank=True, verbose_name='Notas')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_modificacion', models.DateTimeField(auto_now=True)),
                ('escenario', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='proyecciones_config', to='core.escenario', verbose_name='Escenario')),
                ('marca', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='proyecciones_config', to='core.marca', verbose_name='Marca')),
                ('plantilla_estacional', models.ForeignKey(blank=True, help_text='Distribución mensual a aplicar (si aplica al método)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='proyecciones', to='core.plantillaestacional', verbose_name='Plantilla Estacional')),
            ],
            options={
                'verbose_name': 'Configuración de Proyección',
                'verbose_name_plural': 'Configuraciones de Proyección',
                'db_table': 'dxv_proyeccion_ventas_config',
                'ordering': ['marca', 'escenario', 'anio'],
                'unique_together': {('marca', 'escenario', 'anio')},
            },
        ),
        migrations.CreateModel(
            name='ProyeccionProducto',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo', models.CharField(choices=[('producto', 'Producto (SKU)'), ('categoria', 'Categoría')], max_length=20, verbose_name='Tipo')),
                ('precio_unitario', models.DecimalField(decimal_places=2, help_text='Precio por unidad (se auto-completa del producto/categoría)', max_digits=12, verbose_name='Precio Unitario')),
                ('unidades_enero', models.IntegerField(default=0, verbose_name='Unid. Enero')),
                ('unidades_febrero', models.IntegerField(default=0, verbose_name='Unid. Febrero')),
                ('unidades_marzo', models.IntegerField(default=0, verbose_name='Unid. Marzo')),
                ('unidades_abril', models.IntegerField(default=0, verbose_name='Unid. Abril')),
                ('unidades_mayo', models.IntegerField(default=0, verbose_name='Unid. Mayo')),
                ('unidades_junio', models.IntegerField(default=0, verbose_name='Unid. Junio')),
                ('unidades_julio', models.IntegerField(default=0, verbose_name='Unid. Julio')),
                ('unidades_agosto', models.IntegerField(default=0, verbose_name='Unid. Agosto')),
                ('unidades_septiembre', models.IntegerField(default=0, verbose_name='Unid. Septiembre')),
                ('unidades_octubre', models.IntegerField(default=0, verbose_name='Unid. Octubre')),
                ('unidades_noviembre', models.IntegerField(default=0, verbose_name='Unid. Noviembre')),
                ('unidades_diciembre', models.IntegerField(default=0, verbose_name='Unid. Diciembre')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_modificacion', models.DateTimeField(auto_now=True)),
                ('categoria', models.ForeignKey(blank=True, help_text="Seleccionar si tipo es 'Categoría'", null=True, on_delete=django.db.models.deletion.CASCADE, related_name='proyecciones', to='core.categoriaproducto', verbose_name='Categoría')),
                ('config', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='proyecciones_producto', to='core.proyeccionventasconfig', verbose_name='Configuración')),
                ('producto', models.ForeignKey(blank=True, help_text="Seleccionar si tipo es 'Producto'", null=True, on_delete=django.db.models.deletion.CASCADE, related_name='proyecciones', to='core.producto', verbose_name='Producto')),
            ],
            options={
                'verbose_name': 'Proyección por Producto',
                'verbose_name_plural': 'Proyecciones por Producto',
                'db_table': 'dxv_proyeccion_producto',
            },
        ),
        migrations.CreateModel(
            name='ProyeccionPenetracion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('penetracion_inicial', models.DecimalField(decimal_places=2, help_text='Porcentaje del mercado que se espera capturar al inicio del año', max_digits=5, verbose_name='Penetración Inicial %')),
                ('penetracion_final', models.DecimalField(decimal_places=2, help_text='Porcentaje del mercado que se espera capturar al final del año', max_digits=5, verbose_name='Penetración Final %')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_modificacion', models.DateTimeField(auto_now=True)),
                ('config', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='proyeccion_penetracion', to='core.proyeccionventasconfig', verbose_name='Configuración')),
                ('mercado', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='proyecciones', to='core.definicionmercado', verbose_name='Mercado Objetivo')),
            ],
            options={
                'verbose_name': 'Proyección por Penetración',
                'verbose_name_plural': 'Proyecciones por Penetración',
                'db_table': 'dxv_proyeccion_penetracion',
            },
        ),
        migrations.CreateModel(
            name='ProyeccionManual',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('enero', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Enero')),
                ('febrero', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Febrero')),
                ('marzo', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Marzo')),
                ('abril', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Abril')),
                ('mayo', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Mayo')),
                ('junio', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Junio')),
                ('julio', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Julio')),
                ('agosto', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Agosto')),
                ('septiembre', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Septiembre')),
                ('octubre', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Octubre')),
                ('noviembre', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Noviembre')),
                ('diciembre', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Diciembre')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_modificacion', models.DateTimeField(auto_now=True)),
                ('config', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='proyeccion_manual', to='core.proyeccionventasconfig', verbose_name='Configuración')),
            ],
            options={
                'verbose_name': 'Proyección Manual',
                'verbose_name_plural': 'Proyecciones Manuales',
                'db_table': 'dxv_proyeccion_manual',
            },
        ),
        migrations.CreateModel(
            name='ProyeccionCrecimiento',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('ventas_base_anual', models.DecimalField(decimal_places=2, help_text='Valor de ventas del año base (año anterior o referencia)', max_digits=15, verbose_name='Ventas Base Anual')),
                ('anio_base', models.IntegerField(help_text='Año de referencia para el crecimiento', verbose_name='Año Base')),
                ('factor_crecimiento', models.DecimalField(decimal_places=2, default=0, help_text='Porcentaje de crecimiento esperado (ej: 10 para 10%)', max_digits=6, verbose_name='Factor de Crecimiento %')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_modificacion', models.DateTimeField(auto_now=True)),
                ('config', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='proyeccion_crecimiento', to='core.proyeccionventasconfig', verbose_name='Configuración')),
            ],
            options={
                'verbose_name': 'Proyección por Crecimiento',
                'verbose_name_plural': 'Proyecciones por Crecimiento',
                'db_table': 'dxv_proyeccion_crecimiento',
            },
        ),
        migrations.CreateModel(
            name='ProyeccionCanal',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('enero', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Enero')),
                ('febrero', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Febrero')),
                ('marzo', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Marzo')),
                ('abril', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Abril')),
                ('mayo', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Mayo')),
                ('junio', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Junio')),
                ('julio', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Julio')),
                ('agosto', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Agosto')),
                ('septiembre', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Septiembre')),
                ('octubre', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Octubre')),
                ('noviembre', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Noviembre')),
                ('diciembre', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Diciembre')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_modificacion', models.DateTimeField(auto_now=True)),
                ('canal', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='proyecciones', to='core.canalventa', verbose_name='Canal de Venta')),
                ('config', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='proyecciones_canal', to='core.proyeccionventasconfig', verbose_name='Configuración')),
            ],
            options={
                'verbose_name': 'Proyección por Canal',
                'verbose_name_plural': 'Proyecciones por Canal',
                'db_table': 'dxv_proyeccion_canal',
                'unique_together': {('config', 'canal')},
            },
        ),
    ]
